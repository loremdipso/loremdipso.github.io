<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><title>Dynamic reading progress bar</title><meta content="How to add a progress bar to your blog" name=description><link href="/style.css?h=113f377b3ae52303efd1" integrity="sha256-ET83ezrlIwPv0VEg5Um8fx4qGJsUhKwPaUTyshbShXA=" crossorigin rel=stylesheet><link href="/post.css?h=618e029f323073604e10" integrity="sha256-YY4CnzIwc2BOEGNHgWXNaGjZyO9H+TjljQ/oWRSHwEg=" crossorigin rel=stylesheet><script src="/js/post-scroll.js?h=edfc3a547fcea064d0ad" async crossorigin></script><body><header class="app-header slide-in-from-top"><nav><a href=/>About</a><a href=/posts/>Posts</a><a class=active href=/minis/>Minis</a><a href=/projects/>Projects</a></nav><div class=socials><a rel="noopener me" href=https://www.linkedin.com/in/loremdipso/ target=_blank title=Linkedin> <span class=inline-svg> <svg viewbox="0 0 448 512" class=icon fill=#44bddc height=1em stroke=currentColor stroke-width=0 width=1em xmlns=http://www.w3.org/2000/svg><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg> </span> </a><a rel="noopener me" href=https://github.com/loremdipso target=_blank title=Github> <span class=inline-svg> <svg viewbox="0 0 496 512" class=icon fill=#44bddc height=1em stroke=currentColor stroke-width=0 width=1em xmlns=http://www.w3.org/2000/svg><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </span> </a></div></header><div class=content-wrapper><div class=content><div class=progress-bar></div><main><article><header class=post-header><h1>Dynamic reading progress bar</h1><hr><div class=post-subheader><div class=post-metadata>Feb 10, 2025 · 0 minute read</div><div class=tags><a class=tag href=https://loremdipso.com/tags/ux/> <span class=inline-svg> <svg class="feather feather-tag meta-icon" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1=7 x2=7 y1=7 y2=7></line></svg> </span> ux </a><a class=tag href=https://loremdipso.com/tags/writing/> <span class=inline-svg> <svg class="feather feather-tag meta-icon" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1=7 x2=7 y1=7 y2=7></line></svg> </span> writing </a></div></div><a href="https://github.com/loremdipso/loremdipso.github.io/issues/new?title=Issue with mini-01&body=I found an issue on page 'Dynamic reading progress bar'" class=feedback target=#>Found a mistake? Let me know!</a></header><div class=post-contents><p>I'm sure <a rel="noopener nofollow noreferrer" href=https://fjall-rs.github.io/ target=_blank>fjall-rs</a> isn't the first tech blog to implement a dynamic reading progress bar, but it's the first the caught my eye. Implementing it was trivially easy, though there are some browser pitfalls to be aware of. Here it is, in full:<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#5f6364>// Animate the progress bar
</span><span style=color:#c594c5>let </span><span>progressBar </span><span style=color:#5fb3b3>= </span><span style=color:#69c>document</span><span style=color:#5fb3b3>.</span><span style=color:#69c>querySelector</span><span>(</span><span style=color:#5fb3b3>"</span><span style=color:#99c794>.progress-bar</span><span style=color:#5fb3b3>"</span><span>)</span><span style=color:#5fb3b3>;
</span><span style=color:#c594c5>if </span><span>(progressBar) </span><span style=color:#5fb3b3>{
</span><span> </span><span style=color:#c594c5>let </span><span>html </span><span style=color:#5fb3b3>= </span><span style=color:#69c>document</span><span style=color:#5fb3b3>.</span><span style=color:#69c>querySelector</span><span>(</span><span style=color:#5fb3b3>"</span><span style=color:#99c794>html</span><span style=color:#5fb3b3>"</span><span>)</span><span style=color:#5fb3b3>;
</span><span> </span><span style=color:#c594c5>let </span><span>header </span><span style=color:#5fb3b3>= </span><span style=color:#69c>document</span><span style=color:#5fb3b3>.</span><span style=color:#69c>querySelector</span><span>(</span><span style=color:#5fb3b3>"</span><span style=color:#99c794>header</span><span style=color:#5fb3b3>"</span><span>)</span><span style=color:#5fb3b3>;
</span><span> </span><span style=color:#c594c5>const </span><span style=color:#69c>updateProgressBar </span><span style=color:#5fb3b3>= () </span><span style=color:#c594c5>=> </span><span style=color:#5fb3b3>{
</span><span style=color:#5fb3b3>  </span><span style=color:#5f6364>// This is the only way I found to deal with the mobile address bar
</span><span>  </span><span style=color:#c594c5>let </span><span>effectiveScrollHeight </span><span style=color:#5fb3b3>= </span><span>html</span><span style=color:#5fb3b3>.</span><span>scrollHeight </span><span style=color:#5fb3b3>- </span><span>window</span><span style=color:#5fb3b3>.</span><span>innerHeight</span><span style=color:#5fb3b3>;
</span><span style=color:#5fb3b3>  </span><span style=color:#5f6364>// Only enable this when the post is big enough
</span><span>  </span><span style=color:#c594c5>if </span><span>(effectiveScrollHeight </span><span style=color:#5fb3b3>> </span><span style=color:#f99157>200</span><span>) </span><span style=color:#5fb3b3>{
</span><span>   </span><span style=color:#c594c5>let </span><span>newHeight </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>Math</span><span style=color:#5fb3b3>.</span><span style=color:#69c>round</span><span>(
</span><span>    </span><span style=color:#f99157>100 </span><span style=color:#5fb3b3>* </span><span>(html</span><span style=color:#5fb3b3>.</span><span>scrollTop </span><span style=color:#5fb3b3>/ </span><span>effectiveScrollHeight)
</span><span>   )</span><span style=color:#5fb3b3>;
</span><span>   progressBar</span><span style=color:#5fb3b3>.</span><span>style</span><span style=color:#5fb3b3>.</span><span>width </span><span style=color:#5fb3b3>= `${</span><span>newHeight</span><span style=color:#5fb3b3>}</span><span style=color:#99c794>%</span><span style=color:#5fb3b3>`;
</span><span>  </span><span style=color:#5fb3b3>} </span><span style=color:#c594c5>else </span><span style=color:#5fb3b3>{
</span><span>   progressBar</span><span style=color:#5fb3b3>.</span><span>style</span><span style=color:#5fb3b3>.</span><span>width </span><span style=color:#5fb3b3>= "</span><span style=color:#99c794>0</span><span style=color:#5fb3b3>";
</span><span>  </span><span style=color:#5fb3b3>}
</span><span> </span><span style=color:#5fb3b3>};
</span><span>
</span><span> </span><span style=color:#69c>document</span><span style=color:#5fb3b3>.</span><span style=color:#69c>addEventListener</span><span>(</span><span style=color:#5fb3b3>"</span><span style=color:#99c794>scroll</span><span style=color:#5fb3b3>", () </span><span style=color:#c594c5>=> </span><span style=color:#5fb3b3>{
</span><span>  </span><span style=color:#69c>updateProgressBar</span><span>()</span><span style=color:#5fb3b3>;
</span><span> </span><span style=color:#5fb3b3>}</span><span>)</span><span style=color:#5fb3b3>;
</span><span style=color:#5fb3b3> </span><span style=color:#5f6364>// Scroll events don't always fire when the window resizes
</span><span> </span><span style=color:#69c>document</span><span style=color:#5fb3b3>.</span><span style=color:#69c>addEventListener</span><span>(</span><span style=color:#5fb3b3>"</span><span style=color:#99c794>resize</span><span style=color:#5fb3b3>", () </span><span style=color:#c594c5>=> </span><span style=color:#5fb3b3>{
</span><span>  </span><span style=color:#69c>updateProgressBar</span><span>()</span><span style=color:#5fb3b3>;
</span><span> </span><span style=color:#5fb3b3>}</span><span>)</span><span style=color:#5fb3b3>;
</span><span style=color:#5fb3b3>}
</span><span>
</span></code></pre><pre class=language-css data-lang=css style=color:#cccece;background-color:#2b2c2f><code class=language-css data-lang=css><span style=color:#5fb3b3>.</span><span style=color:#bb80b3>progress-bar </span><span style=color:#5fb3b3>{
</span><span>  </span><span style=color:#fac863>position</span><span style=color:#5fb3b3>: </span><span style=color:#f99157>fixed</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#fac863>left</span><span style=color:#5fb3b3>: </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#fac863>top</span><span style=color:#5fb3b3>: </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#fac863>height</span><span style=color:#5fb3b3>: </span><span style=color:#f99157>3px</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#fac863>background</span><span style=color:#5fb3b3>: #5ca3ff;
</span><span>  </span><span style=color:#5f6364>/* so you can click through */
</span><span>  </span><span style=color:#fac863>pointer-events</span><span style=color:#5fb3b3>: </span><span style=color:#f99157>none</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5f6364>/* raise above everything else */
</span><span>  </span><span style=color:#fac863>z-index</span><span style=color:#5fb3b3>: </span><span style=color:#f99157>100</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5f6364>/* make the transition nice and smooth */
</span><span>  </span><span style=color:#fac863>transition</span><span style=color:#5fb3b3>: </span><span style=color:#f99157>width 1s ease-in-out</span><span style=color:#5fb3b3>;
</span><span style=color:#5fb3b3>}
</span></code></pre><p>And I think the result is quite pleasing:<p><video title="Progress bar" autoplay loop muted style=aspect-ratio:3.93><source src=/minis/mini-01/assets/demo.mp4 type=video/mp4></video></div></article><hr><div class=suggested-post-links><h3>Suggested reading</h3><a class=previous href=/minis/mini-02> Previously: <b></b> </a><a class=next href=/minis/mini-03> Up next: <b></b> </a></div></main></div><footer class="app-footer fade-in"><p>© 2025  Michael Adams  <a href=/rss.xml target=_blank title=rss> <span class=inline-svg> <svg class="feather feather-rss" viewbox="0 0 24 24" fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx=5 cy=19 r=1></circle></svg> </span> </a></footer></div>